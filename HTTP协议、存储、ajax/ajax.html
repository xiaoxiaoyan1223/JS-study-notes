<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
        //1、XLMHttpRequest  
         //浏览器要想实现与服务器之间的异步通信，要依靠XLMHttpRequest，他是个构造函数
        //2、ajax的使用步骤
        //2.1创建xhr对象
        //const xhr=new XLMHttpRequest()
        //2.2监听事件，处理响应
          //当获取到响应后，会触发到xhr对象的readystatechange事件，可以在该事件中对响应进行处理
          //xhr.onreadystatechange=()=>{//为了兼容性问题，我们不使用this
            //if(readyState!=4) return;
            //HTTP CODE
            //获取响应后，响应的内容会自动填充xhr对象的属性
            //xhr.status:状态码         200  400
            //xhr.statusText:状态码说明  ok   not found
        //     if((xhr.status>=200)&(xhr.status<300)||xhr.status===304)
        //     {
        //         console.log('正常使用响应数据');
        //         console.log(xhr.responseText);//数据会作为文本形式存储在这里
        //     }
        //   }
        //2.3准备发送请求  
          // xhr.open('HTTP的方法 GET POST PUT DELETE'，
          // '地址URL 网址等',true)
          //调用OPEN并不会真正的发送请求，而是做好发送请求前的准备工作
        //2.4调用send()正式发送请求
          //send()的参数是通过请求体携带的数据  也可以不传参，不传的时候最好在括号里写null，但还是建议传
        
          //readystatechange事件监听readyState的状态 0~4共五种
          //0:未初始化，尚未调用open（）
          //1:启动。调用open(),未调用send()
          //2:发送。调用send(),但尚未接收到响应
          //3:接收。已经接收到部分数据响应
          //4:完成。已经接收到全部响应数据

    // 3、使用Ajax完成前后端通信
    // const url='https://www.baidu.com';
    const xhr=new XMLHttpRequest();
    xhr.onreadystatechange=()=>{
        if(xhr.readyState!=4) return;
        if((xhr.status>=200)&(xhr.status<300)||xhr.status===304)
        {
            console.log(xhr.responseText);
            console.log(typeof xhr.responseText);
        }
    }

    xhr.open('GET',url,true);
    //url其实也可以是本地的
    xhr.open('GET','./plan.json',true);
    xhr.send(null);

    </script>
</body>
</html>